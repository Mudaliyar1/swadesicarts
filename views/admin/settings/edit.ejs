<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %> - Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/admin.css">
    <style>
        .settings-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .section-title {
            color: #2c5f2d;
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #97c93d;
        }
        .image-preview {
            max-width: 300px;
            margin-top: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .value-card {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 15px;
            background: #f8f9fa;
        }
        .btn-remove-value {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .nav-tabs .nav-link {
            color: #2c5f2d;
        }
        .nav-tabs .nav-link.active {
            background-color: #2c5f2d;
            color: white;
        }
    </style>
</head>
<body class="admin-body">
    <nav class="navbar navbar-dark bg-swadesi d-lg-none">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <span class="navbar-brand mb-0">Website Settings</span>
            <a href="/admin/logout" class="btn btn-sm btn-outline-light"><i class="bi bi-box-arrow-right"></i></a>
        </div>
    </nav>

    <div class="admin-sidebar d-none d-lg-flex flex-column" id="sidebarDesktop">
        <div class="sidebar-header">
            <h5 class="mb-0"><i class="bi bi-speedometer2"></i> <span class="sidebar-text">Admin Panel</span></h5>
        </div>
        <ul class="sidebar-nav flex-grow-1">
            <li><a href="/admin/dashboard" title="Dashboard"><i class="bi bi-speedometer2"></i><span class="sidebar-text">Dashboard</span></a></li>
            <li><a href="/admin/seasonal-products" title="Seasonal Products"><i class="bi bi-calendar3"></i><span class="sidebar-text">Seasonal Products</span></a></li>
            <li><a href="/admin/tech-packages" title="Tech Packages"><i class="bi bi-laptop"></i><span class="sidebar-text">Tech Packages</span></a></li>
            <li><a href="/admin/organic-products" title="Organic Products"><i class="bi bi-flower2"></i><span class="sidebar-text">Organic Products</span></a></li>
            <li><a href="/admin/stories" title="Stories"><i class="bi bi-images"></i><span class="sidebar-text">Stories</span></a></li>
            <li><a href="/admin/inquiries" title="Inquiries"><i class="bi bi-chat-dots"></i><span class="sidebar-text">Inquiries</span></a></li>
            <li><a href="/admin/visitors" title="Visitors"><i class="bi bi-person-lines-fill"></i><span class="sidebar-text">Visitors</span></a></li>
            <li><a href="/admin/admins" title="Admin Users"><i class="bi bi-people"></i><span class="sidebar-text">Admin Users</span></a></li>
            <li><a href="/admin/settings" class="active" title="Website Settings"><i class="bi bi-gear"></i><span class="sidebar-text">Website Settings</span></a></li>
        </ul>
        <div class="sidebar-footer">
            <a href="/" target="_blank" title="View Website"><i class="bi bi-globe"></i><span class="sidebar-text">View Website</span></a>
            <a href="/admin/logout" title="Logout"><i class="bi bi-box-arrow-right"></i><span class="sidebar-text">Logout</span></a>
        </div>
        <button class="sidebar-toggle d-none d-lg-block" id="sidebarToggle"><i class="bi bi-chevron-left"></i></button>
    </div>

    <div class="offcanvas offcanvas-start bg-swadesi text-white" tabindex="-1" id="sidebar">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title">Admin Panel</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body p-0">
            <ul class="sidebar-nav-mobile">
                <li><a href="/admin/dashboard"><i class="bi bi-speedometer2"></i> Dashboard</a></li>
                <li><a href="/admin/seasonal-products"><i class="bi bi-calendar3"></i> Seasonal Products</a></li>
                <li><a href="/admin/tech-packages"><i class="bi bi-laptop"></i> Tech Packages</a></li>
                <li><a href="/admin/organic-products"><i class="bi bi-flower2"></i> Organic Products</a></li>
                <li><a href="/admin/stories"><i class="bi bi-images"></i> Stories</a></li>
                <li><a href="/admin/inquiries"><i class="bi bi-chat-dots"></i> Inquiries</a></li>
                <li><a href="/admin/visitors"><i class="bi bi-person-lines-fill"></i> Visitors</a></li>
                <li><a href="/admin/admins"><i class="bi bi-people"></i> Admin Users</a></li>
                <li><a href="/admin/settings" class="active"><i class="bi bi-gear"></i> Website Settings</a></li>
                <li><a href="/" target="_blank"><i class="bi bi-globe"></i> View Website</a></li>
                <li><a href="/admin/logout"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
            </ul>
        </div>
    </div>

    <div class="admin-content">
        <div class="container-fluid p-4">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="fw-bold mb-0"><i class="bi bi-gear"></i> <%= title %></h2>
            </div>

                <% if (messages.success && messages.success.length > 0) { %>
                    <div class="alert alert-success alert-dismissible fade show">
                        <%= messages.success %>
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                <% } %>

                <% if (messages.error && messages.error.length > 0) { %>
                    <div class="alert alert-danger alert-dismissible fade show">
                        <%= messages.error %>
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                <% } %>

                <!-- Settings Tabs -->
                <ul class="nav nav-tabs mb-4" id="settingsTabs" role="tablist">
                    <li class="nav-item">
                        <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#logo" type="button">
                            <i class="bi bi-image"></i> Logo
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#header" type="button">
                            <i class="bi bi-border-top"></i> Header
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#colors" type="button">
                            <i class="bi bi-palette"></i> Colors
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#footer" type="button">
                            <i class="bi bi-footer"></i> Footer
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#contact" type="button">
                            <i class="bi bi-envelope"></i> Contact Page
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#social" type="button">
                            <i class="bi bi-share"></i> Social Media
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" data-bs-toggle="tab" data-bs-target="#about" type="button">
                            <i class="bi bi-info-circle"></i> About Page
                        </button>
                    </li>
                </ul>

                <form action="/admin/settings" method="POST" enctype="multipart/form-data">
                    <div class="tab-content">
                        <!-- Logo Tab -->
                        <div class="tab-pane fade show active" id="logo">
                            <div class="settings-section">
                                <h3 class="section-title">Website Logo</h3>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <% if (settings.logo && settings.logo.url) { %>
                                            <div class="mb-3">
                                                <label class="form-label">Current Logo:</label>
                                                <div id="logoPreviewContainer" style="background: #f8f9fa; padding: 30px; border-radius: 8px; min-height: 150px; display: flex; align-items: center; border: 2px dashed #dee2e6;">
                                                    <img src="<%= settings.logo.url %>" alt="Website Logo" id="logoPreview" 
                                                         style="object-fit: contain;">
                                                </div>
                                                <button type="button" class="btn btn-danger btn-sm mt-2" onclick="deleteLogo()">
                                                    <i class="bi bi-trash"></i> Delete Logo
                                                </button>
                                            </div>
                                        <% } %>

                                        <div class="mb-3">
                                            <label for="logo" class="form-label">Upload New Logo</label>
                                            <input type="file" class="form-control" id="logoFile" name="logo" accept="image/*" onchange="previewLogoFile(this)">
                                            <small class="text-muted">Formats: JPG, PNG, SVG</small>
                                        </div>
                                    </div>

                                    <% if (settings.logo && settings.logo.url) { %>
                                        <div class="col-md-6">
                                            <h5 class="mb-3">Logo Settings</h5>
                                            
                                            <div class="mb-3">
                                                <label for="logo.width" class="form-label">Width: <span id="widthValue"><%= settings.logo.width %></span>px</label>
                                                <input type="range" class="form-range" id="logo.width" name="logo.width" 
                                                       min="1" max="1000" value="<%= settings.logo.width %>" 
                                                       oninput="updateLogoPreview()">
                                                <small class="text-muted">Range: 1px - 1000px</small>
                                            </div>

                                            <div class="mb-3">
                                                <label for="logo.height" class="form-label">Height: <span id="heightValue"><%= settings.logo.height %></span>px</label>
                                                <input type="range" class="form-range" id="logo.height" name="logo.height" 
                                                       min="1" max="1000" value="<%= settings.logo.height %>" 
                                                       oninput="updateLogoPreview()">
                                                <small class="text-muted">Range: 1px - 1000px</small>
                                            </div>

                                            <div class="mb-3">
                                                <label for="logo.horizontalPosition" class="form-label">
                                                    Horizontal Position: 
                                                    <span id="horizontalPosValue"><%= settings.logo.horizontalPosition || 0 %></span>
                                                    <small class="text-muted">(Left <i class="bi bi-arrow-left-right"></i> Right)</small>
                                                </label>
                                                <input type="range" class="form-range" id="logo.horizontalPosition" name="logo.horizontalPosition" 
                                                       min="-100" max="100" value="<%= settings.logo.horizontalPosition || 0 %>" 
                                                       oninput="updateLogoPreview()">
                                                <div class="d-flex justify-content-between">
                                                    <small class="text-muted">Left (-100)</small>
                                                    <small class="text-muted">Center (0)</small>
                                                    <small class="text-muted">Right (+100)</small>
                                                </div>
                                            </div>

                                            <div class="mb-3">
                                                <label for="logo.verticalPosition" class="form-label">
                                                    Vertical Position: 
                                                    <span id="verticalPosValue"><%= settings.logo.verticalPosition || 0 %></span>
                                                    <small class="text-muted">(Top <i class="bi bi-arrow-down-up"></i> Bottom)</small>
                                                </label>
                                                <input type="range" class="form-range" id="logo.verticalPosition" name="logo.verticalPosition" 
                                                       min="-100" max="100" value="<%= settings.logo.verticalPosition || 0 %>" 
                                                       oninput="updateLogoPreview()">
                                                <div class="d-flex justify-content-between">
                                                    <small class="text-muted">Top (-100)</small>
                                                    <small class="text-muted">Middle (0)</small>
                                                    <small class="text-muted">Bottom (+100)</small>
                                                </div>
                                            </div>

                                            <div class="alert alert-info">
                                                <i class="bi bi-info-circle"></i> Preview shows how the logo will appear in the navbar. Use sliders for precise control!
                                            </div>
                                        </div>
                                    <% } %>
                                </div>
                            </div>
                        </div>

                        <!-- Header Tab -->
                        <div class="tab-pane fade" id="header">
                            <div class="settings-section">
                                <h3 class="section-title">Header Settings</h3>
                                <p class="text-muted mb-4">Manage header appearance and layout settings.</p>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-body">
                                                <label for="header.height" class="form-label fw-bold">Header Height</label>
                                                <p class="text-muted small">Controls the height of the navigation bar (50px - 200px)</p>
                                                
                                                <div class="d-flex align-items-center gap-3">
                                                    <input type="range" class="form-range flex-grow-1" id="header.height" 
                                                           name="header.height" 
                                                           min="50" max="200" step="1"
                                                           value="<%= settings.header && settings.header.height ? settings.header.height : 72 %>"
                                                           onchange="updateHeaderHeightPreview()">
                                                    <span id="headerHeightValue" class="badge bg-swadesi" style="font-size: 16px; min-width: 50px;">
                                                        <%= settings.header && settings.header.height ? settings.header.height : 72 %>px
                                                    </span>
                                                </div>
                                                
                                                <div class="mt-3 p-3 border rounded" style="background-color: #f8f9fa;">
                                                    <p class="text-muted small mb-0"><strong>Preview:</strong> The navbar will be <span id="headerHeightPreviewText"><%= settings.header && settings.header.height ? settings.header.height : 72 %></span>px tall</p>
                                                </div>
                                                
                                                <div class="alert alert-info mt-3">
                                                    <i class="bi bi-info-circle"></i> Larger header heights may be useful for wider logos or more navigation items. The content below will automatically adjust to prevent overlap.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-body">
                                                <h5 class="card-title">Height Information</h5>
                                                <ul class="list-unstyled">
                                                    <li class="mb-2"><strong>Current Height:</strong> <span id="headerHeightInfo"><%= settings.header && settings.header.height ? settings.header.height : 72 %></span>px</li>
                                                    <li class="mb-2"><strong>Recommended Range:</strong> 60px - 100px</li>
                                                    <li class="mb-2"><strong>Content Padding:</strong> Will be automatically adjusted based on header height</li>
                                                    <li class="mb-0"><strong>Impact:</strong> All pages will use this height to prevent content overlap</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Colors Tab -->
                        <div class="tab-pane fade" id="colors">
                            <div class="settings-section">
                                <h3 class="section-title">Website Color Scheme</h3>
                                <p class="text-muted mb-4">Customize the colors used throughout your website. Changes will apply to header, footer, buttons, and other elements.</p>
                                
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="card mb-3">
                                            <div class="card-body">
                                                <label for="colors.primary" class="form-label fw-bold">Primary Color</label>
                                                <p class="text-muted small">Used for header, footer, and main navigation</p>
                                                <div class="d-flex align-items-center gap-2">
                                                    <input type="color" class="form-control form-control-color" 
                                                           id="colors.primary" name="colors.primary" 
                                                           value="<%= settings.colors ? settings.colors.primary : '#4C1E4F' %>"
                                                           title="Choose primary color">
                                                    <input type="text" class="form-control" 
                                                           id="colors.primary.text" 
                                                           value="<%= settings.colors ? settings.colors.primary : '#4C1E4F' %>"
                                                           pattern="^#[0-9A-Fa-f]{6}$"
                                                           maxlength="7"
                                                           onchange="document.getElementById('colors.primary').value = this.value; updateColorPreview();">
                                                </div>
                                                <div class="mt-2 p-3 rounded" id="primaryPreview" style="background-color: <%= settings.colors ? settings.colors.primary : '#4C1E4F' %>; color: white; text-align: center;">
                                                    Preview
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-4">
                                        <div class="card mb-3">
                                            <div class="card-body">
                                                <label for="colors.accent" class="form-label fw-bold">Accent Color</label>
                                                <p class="text-muted small">Used for buttons, links, and highlights</p>
                                                <div class="d-flex align-items-center gap-2">
                                                    <input type="color" class="form-control form-control-color" 
                                                           id="colors.accent" name="colors.accent" 
                                                           value="<%= settings.colors ? settings.colors.accent : '#B5A886' %>"
                                                           title="Choose accent color">
                                                    <input type="text" class="form-control" 
                                                           id="colors.accent.text" 
                                                           value="<%= settings.colors ? settings.colors.accent : '#B5A886' %>"
                                                           pattern="^#[0-9A-Fa-f]{6}$"
                                                           maxlength="7"
                                                           onchange="document.getElementById('colors.accent').value = this.value; updateColorPreview();">
                                                </div>
                                                <div class="mt-2 p-3 rounded" id="accentPreview" style="background-color: <%= settings.colors ? settings.colors.accent : '#B5A886' %>; color: white; text-align: center;">
                                                    Preview
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-4">
                                        <div class="card mb-3">
                                            <div class="card-body">
                                                <label for="colors.secondary" class="form-label fw-bold">Secondary Color</label>
                                                <p class="text-muted small">Used for secondary elements and backgrounds</p>
                                                <div class="d-flex align-items-center gap-2">
                                                    <input type="color" class="form-control form-control-color" 
                                                           id="colors.secondary" name="colors.secondary" 
                                                           value="<%= settings.colors ? settings.colors.secondary : '#6C8E7F' %>"
                                                           title="Choose secondary color">
                                                    <input type="text" class="form-control" 
                                                           id="colors.secondary.text" 
                                                           value="<%= settings.colors ? settings.colors.secondary : '#6C8E7F' %>"
                                                           pattern="^#[0-9A-Fa-f]{6}$"
                                                           maxlength="7"
                                                           onchange="document.getElementById('colors.secondary').value = this.value; updateColorPreview();">
                                                </div>
                                                <div class="mt-2 p-3 rounded" id="secondaryPreview" style="background-color: <%= settings.colors ? settings.colors.secondary : '#6C8E7F' %>; color: white; text-align: center;">
                                                    Preview
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <hr class="my-4">
                                <h5 class="mb-3">Text Colors</h5>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-body">
                                                <label for="colors.headingText" class="form-label fw-bold">Heading Text Color</label>
                                                <p class="text-muted small">Used for all headings and titles (h1, h2, h3, etc.)</p>
                                                <div class="d-flex align-items-center gap-2">
                                                    <input type="color" class="form-control form-control-color" 
                                                           id="colors.headingText" name="colors.headingText" 
                                                           value="<%= settings.colors ? (settings.colors.headingText || '#2c3e50') : '#2c3e50' %>"
                                                           title="Choose heading text color">
                                                    <input type="text" class="form-control" 
                                                           id="colors.headingText.text" 
                                                           value="<%= settings.colors ? (settings.colors.headingText || '#2c3e50') : '#2c3e50' %>"
                                                           pattern="^#[0-9A-Fa-f]{6}$"
                                                           maxlength="7"
                                                           onchange="document.getElementById('colors.headingText').value = this.value; updateColorPreview();">
                                                </div>
                                                <div class="mt-2 p-3 rounded border" id="headingTextPreview" style="background-color: white;">
                                                    <h5 style="color: <%= settings.colors ? (settings.colors.headingText || '#2c3e50') : '#2c3e50' %>; margin: 0;">Sample Heading</h5>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-body">
                                                <label for="colors.bodyText" class="form-label fw-bold">Body Text Color</label>
                                                <p class="text-muted small">Used for all body text and content paragraphs</p>
                                                <div class="d-flex align-items-center gap-2">
                                                    <input type="color" class="form-control form-control-color" 
                                                           id="colors.bodyText" name="colors.bodyText" 
                                                           value="<%= settings.colors ? (settings.colors.bodyText || '#495057') : '#495057' %>"
                                                           title="Choose body text color">
                                                    <input type="text" class="form-control" 
                                                           id="colors.bodyText.text" 
                                                           value="<%= settings.colors ? (settings.colors.bodyText || '#495057') : '#495057' %>"
                                                           pattern="^#[0-9A-Fa-f]{6}$"
                                                           maxlength="7"
                                                           onchange="document.getElementById('colors.bodyText').value = this.value; updateColorPreview();">
                                                </div>
                                                <div class="mt-2 p-3 rounded border" id="bodyTextPreview" style="background-color: white;">
                                                    <p style="color: <%= settings.colors ? (settings.colors.bodyText || '#495057') : '#495057' %>; margin: 0;">Sample body text content goes here to show the preview.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <hr class="my-4">
                                <h5 class="mb-3">Link Colors</h5>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-body">
                                                <label for="colors.linkColor" class="form-label fw-bold">General Links Color</label>
                                                <p class="text-muted small">Used for links in content, pages, and sidebar</p>
                                                <div class="d-flex align-items-center gap-2">
                                                    <input type="color" class="form-control form-control-color" 
                                                           id="colors.linkColor" name="colors.linkColor" 
                                                           value="<%= settings.colors ? (settings.colors.linkColor || '#B5A886') : '#B5A886' %>"
                                                           title="Choose link color">
                                                    <input type="text" class="form-control" 
                                                           id="colors.linkColor.text" 
                                                           value="<%= settings.colors ? (settings.colors.linkColor || '#B5A886') : '#B5A886' %>"
                                                           pattern="^#[0-9A-Fa-f]{6}$"
                                                           maxlength="7"
                                                           onchange="document.getElementById('colors.linkColor').value = this.value; updateColorPreview();">
                                                </div>
                                                <div class="mt-2 p-3 rounded border" id="linkColorPreview" style="background-color: white;">
                                                    <a style="color: <%= settings.colors ? (settings.colors.linkColor || '#B5A886') : '#B5A886' %>; text-decoration: underline;">This is a sample link</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <div class="card mb-3">
                                            <div class="card-body">
                                                <label for="colors.headerFooterLinkColor" class="form-label fw-bold">Header & Footer Links Color</label>
                                                <p class="text-muted small">Used for links in navbar and footer</p>
                                                <div class="d-flex align-items-center gap-2">
                                                    <input type="color" class="form-control form-control-color" 
                                                           id="colors.headerFooterLinkColor" name="colors.headerFooterLinkColor" 
                                                           value="<%= settings.colors ? (settings.colors.headerFooterLinkColor || '#FFD700') : '#FFD700' %>"
                                                           title="Choose header/footer link color">
                                                    <input type="text" class="form-control" 
                                                           id="colors.headerFooterLinkColor.text" 
                                                           value="<%= settings.colors ? (settings.colors.headerFooterLinkColor || '#FFD700') : '#FFD700' %>"
                                                           pattern="^#[0-9A-Fa-f]{6}$"
                                                           maxlength="7"
                                                           onchange="document.getElementById('colors.headerFooterLinkColor').value = this.value; updateColorPreview();">
                                                </div>
                                                <div class="mt-2 p-3 rounded border" id="headerFooterLinkColorPreview" style="background-color: <%= settings.colors ? settings.colors.primary : '#4C1E4F' %>;">
                                                    <a style="color: <%= settings.colors ? (settings.colors.headerFooterLinkColor || '#FFD700') : '#FFD700' %>; text-decoration: underline;">This is a sample link</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="alert alert-info">
                                    <i class="bi bi-info-circle"></i> 
                                    <strong>Tip:</strong> You can either use the color picker or type the hex code directly. Use format #RRGGBB (e.g., #B5A886)
                                </div>
                            </div>
                        </div>

                        <!-- Footer Tab -->
                        <div class="tab-pane fade" id="footer">
                            <div class="settings-section">
                                <h3 class="section-title">Footer Information</h3>
                                
                                <div class="mb-3">
                                    <label for="footer.phone" class="form-label">Phone Number</label>
                                    <input type="text" class="form-control" id="footer.phone" name="footer.phone" 
                                           value="<%= settings.footer.phone %>">
                                </div>

                                <div class="mb-3">
                                    <label for="footer.email" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="footer.email" name="footer.email" 
                                           value="<%= settings.footer.email %>">
                                </div>

                                <div class="mb-3">
                                    <label for="footer.address" class="form-label">Address</label>
                                    <input type="text" class="form-control" id="footer.address" name="footer.address" 
                                           value="<%= settings.footer.address %>">
                                </div>

                                <div class="mb-3">
                                    <label for="footer.description" class="form-label">Description</label>
                                    <textarea class="form-control" id="footer.description" name="footer.description" 
                                              rows="3"><%= settings.footer.description %></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Tab -->
                        <div class="tab-pane fade" id="contact">
                            <div class="settings-section">
                                <h3 class="section-title">Contact Page Content</h3>
                                
                                <div class="mb-3">
                                    <label for="contact.heading" class="form-label">Main Heading</label>
                                    <input type="text" class="form-control" id="contact.heading" name="contact.heading" 
                                           value="<%= settings.contact.heading %>">
                                </div>

                                <div class="mb-3">
                                    <label for="contact.subheading" class="form-label">Subheading</label>
                                    <input type="text" class="form-control" id="contact.subheading" name="contact.subheading" 
                                           value="<%= settings.contact.subheading %>">
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="contact.location" class="form-label">Location</label>
                                        <input type="text" class="form-control" id="contact.location" name="contact.location" 
                                               value="<%= settings.contact.location %>">
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label for="contact.email" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="contact.email" name="contact.email" 
                                               value="<%= settings.contact.email %>">
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="contact.phone" class="form-label">Phone</label>
                                    <input type="text" class="form-control" id="contact.phone" name="contact.phone" 
                                           value="<%= settings.contact.phone %>">
                                </div>

                                <div class="mb-3">
                                    <label for="whatsapp.number" class="form-label">WhatsApp Number</label>
                                    <input type="text" class="form-control" id="whatsapp.number" name="whatsapp.number"
                                           value="<%= settings.whatsapp ? settings.whatsapp.number : '' %>"
                                           placeholder="e.g. 919876543210">
                                    <small class="text-muted">Use country code and numbers only for best results.</small>
                                </div>

                                <div class="mb-3">
                                    <label for="whatsapp.message" class="form-label">WhatsApp Message</label>
                                    <textarea class="form-control" id="whatsapp.message" name="whatsapp.message" rows="3"
                                              placeholder="Default message for WhatsApp chat"><%= settings.whatsapp ? settings.whatsapp.message : '' %></textarea>
                                </div>

                                <h4 class="mt-4 mb-3">Visitor Modal</h4>
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="visitorModal.enabled" 
                                               name="visitorModal.enabled" value="true"
                                               <%= settings.visitorModal && settings.visitorModal.enabled ? 'checked' : '' %>>
                                        <label class="form-check-label" for="visitorModal.enabled">
                                            <i class="bi bi-person-badge"></i> Enable Visitor Introduction Form
                                        </label>
                                    </div>
                                    <small class="text-muted">When enabled, first-time visitors will see a welcome form to collect their information.</small>
                                </div>

                                <h4 class="mt-4 mb-3">Business Hours</h4>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="contact.businessHours.days" class="form-label">Days</label>
                                        <input type="text" class="form-control" id="contact.businessHours.days" 
                                               name="contact.businessHours.days" 
                                               value="<%= settings.contact.businessHours.days %>">
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label for="contact.businessHours.time" class="form-label">Time</label>
                                        <input type="text" class="form-control" id="contact.businessHours.time" 
                                               name="contact.businessHours.time" 
                                               value="<%= settings.contact.businessHours.time %>">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Social Media Tab -->
                        <div class="tab-pane fade" id="social">
                            <div class="settings-section">
                                <h3 class="section-title">Social Media Links</h3>
                                
                                <div class="mb-3">
                                    <label for="socialMedia.facebook" class="form-label">
                                        <i class="bi bi-facebook"></i> Facebook URL
                                    </label>
                                    <input type="url" class="form-control" id="socialMedia.facebook" 
                                           name="socialMedia.facebook" 
                                           value="<%= settings.socialMedia && settings.socialMedia.facebook ? settings.socialMedia.facebook : '' %>"
                                           placeholder="https://facebook.com/yourpage">
                                </div>

                                <div class="mb-3">
                                    <label for="socialMedia.twitter" class="form-label">
                                        <i class="bi bi-twitter"></i> Twitter URL
                                    </label>
                                    <input type="url" class="form-control" id="socialMedia.twitter" 
                                           name="socialMedia.twitter" 
                                           value="<%= settings.socialMedia && settings.socialMedia.twitter ? settings.socialMedia.twitter : '' %>"
                                           placeholder="https://twitter.com/yourhandle">
                                </div>

                                <div class="mb-3">
                                    <label for="socialMedia.instagram" class="form-label">
                                        <i class="bi bi-instagram"></i> Instagram URL
                                    </label>
                                    <input type="url" class="form-control" id="socialMedia.instagram" 
                                           name="socialMedia.instagram" 
                                           value="<%= settings.socialMedia && settings.socialMedia.instagram ? settings.socialMedia.instagram : '' %>"
                                           placeholder="https://instagram.com/yourprofile">
                                    <small class="text-muted">This link will appear in the "Chat with us" popup on your website.</small>
                                </div>

                                <div class="mb-3">
                                    <label for="socialMedia.linkedin" class="form-label">
                                        <i class="bi bi-linkedin"></i> LinkedIn URL
                                    </label>
                                    <input type="url" class="form-control" id="socialMedia.linkedin" 
                                           name="socialMedia.linkedin" 
                                           value="<%= settings.socialMedia && settings.socialMedia.linkedin ? settings.socialMedia.linkedin : '' %>"
                                           placeholder="https://linkedin.com/company/yourcompany">
                                </div>

                                <div class="mb-3">
                                    <label for="socialMedia.youtube" class="form-label">
                                        <i class="bi bi-youtube"></i> YouTube URL
                                    </label>
                                    <input type="url" class="form-control" id="socialMedia.youtube" 
                                           name="socialMedia.youtube" 
                                           value="<%= settings.socialMedia && settings.socialMedia.youtube ? settings.socialMedia.youtube : '' %>"
                                           placeholder="https://youtube.com/channel/yourchannel">
                                </div>
                            </div>
                        </div>

                        <!-- About Tab -->
                        <div class="tab-pane fade" id="about">
                            <div class="settings-section">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h3 class="section-title mb-0">About Page Content</h3>
                                    <a href="/admin/settings/team" class="btn btn-primary">
                                        <i class="bi bi-people-fill"></i> Manage Team Members
                                    </a>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="about.mainHeading" class="form-label">Main Heading</label>
                                    <input type="text" class="form-control" id="about.mainHeading" 
                                           name="about.mainHeading" value="<%= settings.about.mainHeading %>">
                                </div>

                                <div class="mb-3">
                                    <label for="about.headerDescription" class="form-label">Header Description</label>
                                    <textarea class="form-control" id="about.headerDescription" name="about.headerDescription" 
                                              rows="2"><%= settings.about.headerDescription || '' %></textarea>
                                </div>

                                <div class="mb-3">
                                    <label for="about.description" class="form-label">Description</label>
                                    <textarea class="form-control" id="about.description" name="about.description" 
                                              rows="4"><%= settings.about.description %></textarea>
                                </div>

                                <% if (settings.about.image && settings.about.image.url) { %>
                                    <div class="mb-3">
                                        <label class="form-label">Current About Image:</label>
                                        <div>
                                            <img src="<%= settings.about.image.url %>" alt="About Image" class="image-preview">
                                        </div>
                                        <button type="button" class="btn btn-danger btn-sm mt-2" onclick="deleteAboutImage()">
                                            <i class="bi bi-trash"></i> Delete Image
                                        </button>
                                    </div>
                                <% } %>

                                <div class="mb-3">
                                    <label for="aboutImage" class="form-label">Upload About Image</label>
                                    <input type="file" class="form-control" id="aboutImage" name="aboutImage" accept="image/*">
                                </div>

                                <h4 class="mt-4 mb-3">Values Section</h4>
                                <div class="mb-3">
                                    <label for="about.valuesHeading" class="form-label">Values Heading</label>
                                    <input type="text" class="form-control" id="about.valuesHeading" 
                                           name="about.valuesHeading" value="<%= settings.about.valuesHeading %>">
                                </div>

                                <div class="mb-3">
                                    <label for="about.valuesSubheading" class="form-label">Values Subheading</label>
                                    <input type="text" class="form-control" id="about.valuesSubheading" 
                                           name="about.valuesSubheading" value="<%= settings.about.valuesSubheading %>">
                                </div>

                                <div id="valuesContainer" data-value-count="<%= settings.about.values.length %>">
                                    <% if (settings.about.values && settings.about.values.length > 0) { %>
                                        <% settings.about.values.forEach((value, index) => { %>
                                            <div class="value-card" data-value-index="<%= index %>">
                                                <div class="d-flex justify-content-between align-items-center mb-2">
                                                    <strong>Value #<%= index + 1 %></strong>
                                                    <button type="button" class="btn-remove-value" onclick="removeValue(this)">
                                                        <i class="bi bi-x"></i> Remove
                                                    </button>
                                                </div>
                                                <div class="mb-2">
                                                    <label class="form-label">Icon (Emoji)</label>
                                                    <input type="text" class="form-control" name="values[<%= index %>][icon]" 
                                                           value="<%= value.icon %>" placeholder="">
                                                </div>
                                                <div class="mb-2">
                                                    <label class="form-label">Title</label>
                                                    <input type="text" class="form-control" name="values[<%= index %>][title]" 
                                                           value="<%= value.title %>">
                                                </div>
                                                <div class="mb-2">
                                                    <label class="form-label">Description</label>
                                                    <textarea class="form-control" name="values[<%= index %>][description]" 
                                                              rows="2"><%= value.description %></textarea>
                                                </div>
                                            </div>
                                        <% }) %>
                                    <% } %>
                                </div>

                                <button type="button" class="btn btn-secondary mb-4" onclick="addValue()">
                                    <i class="bi bi-plus"></i> Add Value
                                </button>

                                <h4 class="mt-4 mb-3">Statistics</h4>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Happy Customers (Number)</label>
                                        <input type="text" class="form-control" name="stats.customers" 
                                               value="<%= settings.about.stats.customers %>">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Happy Customers (Label)</label>
                                        <input type="text" class="form-control" name="stats.customersLabel" 
                                               value="<%= settings.about.stats.customersLabel %>">
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Products & Services (Number)</label>
                                        <input type="text" class="form-control" name="stats.products" 
                                               value="<%= settings.about.stats.products %>">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Products & Services (Label)</label>
                                        <input type="text" class="form-control" name="stats.productsLabel" 
                                               value="<%= settings.about.stats.productsLabel %>">
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Experience (Number)</label>
                                        <input type="text" class="form-control" name="stats.experience" 
                                               value="<%= settings.about.stats.experience %>">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Experience (Label)</label>
                                        <input type="text" class="form-control" name="stats.experienceLabel" 
                                               value="<%= settings.about.stats.experienceLabel %>">
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Satisfaction (Number)</label>
                                        <input type="text" class="form-control" name="stats.satisfaction" 
                                               value="<%= settings.about.stats.satisfaction %>">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Satisfaction (Label)</label>
                                        <input type="text" class="form-control" name="stats.satisfactionLabel" 
                                               value="<%= settings.about.stats.satisfactionLabel %>">
                                    </div>
                                </div>

                                <h4 class="mt-4 mb-3">Team Section</h4>
                                <div class="mb-3">
                                    <label for="about.teamHeading" class="form-label">Team Section Heading</label>
                                    <input type="text" class="form-control" id="about.teamHeading" 
                                           name="about.teamHeading" 
                                           value="<%= settings.about.teamHeading || 'Meet Our Team' %>"
                                           placeholder="Meet Our Team">
                                </div>

                                <div class="mb-3">
                                    <label for="about.teamSubheading" class="form-label">Team Section Subheading</label>
                                    <input type="text" class="form-control" id="about.teamSubheading" 
                                           name="about.teamSubheading" 
                                           value="<%= settings.about.teamSubheading || 'The people behind the excellence' %>"
                                           placeholder="The people behind the excellence">
                                    <small class="text-muted">Use the "Manage Team Members" button above to add/edit team members.</small>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <button type="submit" class="btn btn-swadesi btn-lg">
                            <i class="bi bi-save"></i> Save All Settings
                        </button>
                        <a href="/admin/dashboard" class="btn btn-secondary btn-lg">
                            <i class="bi bi-x"></i> Cancel
                        </a>
                    </div>
                </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/admin.js"></script>
    <script>
        const valuesContainer = document.getElementById('valuesContainer');
        let valueIndex = Number(valuesContainer?.dataset.valueCount || 0);

        function addValue() {
            const container = document.getElementById('valuesContainer');
            const valueCard = document.createElement('div');
            valueCard.className = 'value-card';
            valueCard.setAttribute('data-value-index', valueIndex);
            
            valueCard.innerHTML = `
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <strong>Value #${valueIndex + 1}</strong>
                    <button type="button" class="btn-remove-value" onclick="removeValue(this)">
                        <i class="bi bi-x"></i> Remove
                    </button>
                </div>
                <div class="mb-2">
                    <label class="form-label">Icon (Emoji)</label>
                    <input type="text" class="form-control" name="values[${valueIndex}][icon]" 
                           value="" placeholder="">
                </div>
                <div class="mb-2">
                    <label class="form-label">Title</label>
                    <input type="text" class="form-control" name="values[${valueIndex}][title]" value="">
                </div>
                <div class="mb-2">
                    <label class="form-label">Description</label>
                    <textarea class="form-control" name="values[${valueIndex}][description]" rows="2"></textarea>
                </div>
            `;
            
            container.appendChild(valueCard);
            valueIndex++;
        }

        function removeValue(button) {
            if (confirm('Are you sure you want to remove this value?')) {
                button.closest('.value-card').remove();
            }
        }

        function deleteLogo() {
            if (confirm('Are you sure you want to delete the logo?')) {
                fetch('/admin/settings/logo', {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                }).then(response => {
                    if (response.ok) {
                        window.location.reload();
                    } else {
                        alert('Error deleting logo');
                    }
                });
            }
        }

        function deleteAboutImage() {
            if (confirm('Are you sure you want to delete the about image?')) {
                fetch('/admin/settings/about-image', {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                }).then(response => {
                    if (response.ok) {
                        window.location.reload();
                    } else {
                        alert('Error deleting about image');
                    }
                });
            }
        }

        // Logo preview functions
        function updateLogoPreview() {
            const preview = document.getElementById('logoPreview');
            const container = document.getElementById('logoPreviewContainer');
            
            if (!preview || !container) return;
            
            // Update size
            const width = document.getElementById('logo.width').value;
            const height = document.getElementById('logo.height').value;
            document.getElementById('widthValue').textContent = width;
            document.getElementById('heightValue').textContent = height;
            
            preview.style.width = width + 'px';
            preview.style.height = height + 'px';
            
            // Update horizontal position (-100 to 100)
            const horizontalPos = document.getElementById('logo.horizontalPosition').value;
            document.getElementById('horizontalPosValue').textContent = horizontalPos;
            
            // Convert -100 to 100 range to flexbox values
            // -100 = flex-start, 0 = center, 100 = flex-end
            if (horizontalPos < -33) {
                container.style.justifyContent = 'flex-start';
            } else if (horizontalPos > 33) {
                container.style.justifyContent = 'flex-end';
            } else {
                container.style.justifyContent = 'center';
            }
            
            // Fine-tune with margin for precise positioning
            const marginLeftPercent = (parseInt(horizontalPos) + 100) / 2; // Convert -100,100 to 0,100
            preview.style.marginLeft = `${(marginLeftPercent - 50)}px`;
            
            // Update vertical position (-100 to 100)
            const verticalPos = document.getElementById('logo.verticalPosition').value;
            document.getElementById('verticalPosValue').textContent = verticalPos;
            
            // Convert -100 to 100 range to flexbox values
            if (verticalPos < -33) {
                container.style.alignItems = 'flex-start';
            } else if (verticalPos > 33) {
                container.style.alignItems = 'flex-end';
            } else {
                container.style.alignItems = 'center';
            }
            
            // Fine-tune with margin for precise positioning
            const marginTopPercent = (parseInt(verticalPos) + 100) / 2;
            preview.style.marginTop = `${(marginTopPercent - 50) / 2}px`;
        }

        // Header height preview functions
        function updateHeaderHeightPreview() {
            const heightInput = document.getElementById('header.height');
            if (!heightInput) return;
            
            const height = heightInput.value;
            document.getElementById('headerHeightValue').textContent = height + 'px';
            document.getElementById('headerHeightPreviewText').textContent = height;
            document.getElementById('headerHeightInfo').textContent = height;
        }
        function updateColorPreview() {
            // Update primary color
            const primaryPicker = document.getElementById('colors.primary');
            const primaryText = document.getElementById('colors.primary.text');
            const primaryPreview = document.getElementById('primaryPreview');
            
            if (primaryPicker && primaryText && primaryPreview) {
                primaryText.value = primaryPicker.value.toUpperCase();
                primaryPreview.style.backgroundColor = primaryPicker.value;
            }
            
            // Update accent color
            const accentPicker = document.getElementById('colors.accent');
            const accentText = document.getElementById('colors.accent.text');
            const accentPreview = document.getElementById('accentPreview');
            
            if (accentPicker && accentText && accentPreview) {
                accentText.value = accentPicker.value.toUpperCase();
                accentPreview.style.backgroundColor = accentPicker.value;
            }
            
            // Update secondary color
            const secondaryPicker = document.getElementById('colors.secondary');
            const secondaryText = document.getElementById('colors.secondary.text');
            const secondaryPreview = document.getElementById('secondaryPreview');
            
            if (secondaryPicker && secondaryText && secondaryPreview) {
                secondaryText.value = secondaryPicker.value.toUpperCase();
                secondaryPreview.style.backgroundColor = secondaryPicker.value;
            }
            
            // Update heading text color
            const headingTextPicker = document.getElementById('colors.headingText');
            const headingTextText = document.getElementById('colors.headingText.text');
            const headingTextPreview = document.getElementById('headingTextPreview');
            
            if (headingTextPicker && headingTextText && headingTextPreview) {
                headingTextText.value = headingTextPicker.value.toUpperCase();
                const h5 = headingTextPreview.querySelector('h5');
                if (h5) h5.style.color = headingTextPicker.value;
            }
            
            // Update body text color
            const bodyTextPicker = document.getElementById('colors.bodyText');
            const bodyTextText = document.getElementById('colors.bodyText.text');
            const bodyTextPreview = document.getElementById('bodyTextPreview');
            
            if (bodyTextPicker && bodyTextText && bodyTextPreview) {
                bodyTextText.value = bodyTextPicker.value.toUpperCase();
                const p = bodyTextPreview.querySelector('p');
                if (p) p.style.color = bodyTextPicker.value;
            }
            
            // Update link color
            const linkColorPicker = document.getElementById('colors.linkColor');
            const linkColorText = document.getElementById('colors.linkColor.text');
            const linkColorPreview = document.getElementById('linkColorPreview');
            
            if (linkColorPicker && linkColorText && linkColorPreview) {
                linkColorText.value = linkColorPicker.value.toUpperCase();
                const a = linkColorPreview.querySelector('a');
                if (a) a.style.color = linkColorPicker.value;
            }
            
            // Update header/footer link color
            const headerFooterLinkColorPicker = document.getElementById('colors.headerFooterLinkColor');
            const headerFooterLinkColorText = document.getElementById('colors.headerFooterLinkColor.text');
            const headerFooterLinkColorPreview = document.getElementById('headerFooterLinkColorPreview');
            
            if (headerFooterLinkColorPicker && headerFooterLinkColorText && headerFooterLinkColorPreview) {
                headerFooterLinkColorText.value = headerFooterLinkColorPicker.value.toUpperCase();
                const a = headerFooterLinkColorPreview.querySelector('a');
                if (a) a.style.color = headerFooterLinkColorPicker.value;
            }
        }

        // Sync color picker with text input
        document.addEventListener('DOMContentLoaded', function() {
            // Primary color sync
            const primaryPicker = document.getElementById('colors.primary');
            const primaryText = document.getElementById('colors.primary.text');
            if (primaryPicker && primaryText) {
                primaryPicker.addEventListener('input', updateColorPreview);
                primaryText.addEventListener('input', function() {
                    if (/^#[0-9A-Fa-f]{6}$/.test(this.value)) {
                        primaryPicker.value = this.value;
                        updateColorPreview();
                    }
                });
            }
            
            // Accent color sync
            const accentPicker = document.getElementById('colors.accent');
            const accentText = document.getElementById('colors.accent.text');
            if (accentPicker && accentText) {
                accentPicker.addEventListener('input', updateColorPreview);
                accentText.addEventListener('input', function() {
                    if (/^#[0-9A-Fa-f]{6}$/.test(this.value)) {
                        accentPicker.value = this.value;
                        updateColorPreview();
                    }
                });
            }
            
            // Secondary color sync
            const secondaryPicker = document.getElementById('colors.secondary');
            const secondaryText = document.getElementById('colors.secondary.text');
            if (secondaryPicker && secondaryText) {
                secondaryPicker.addEventListener('input', updateColorPreview);
                secondaryText.addEventListener('input', function() {
                    if (/^#[0-9A-Fa-f]{6}$/.test(this.value)) {
                        secondaryPicker.value = this.value;
                        updateColorPreview();
                    }
                });
            }
            
            // Heading text color sync
            const headingTextPicker = document.getElementById('colors.headingText');
            const headingTextText = document.getElementById('colors.headingText.text');
            if (headingTextPicker && headingTextText) {
                headingTextPicker.addEventListener('input', updateColorPreview);
                headingTextText.addEventListener('input', function() {
                    if (/^#[0-9A-Fa-f]{6}$/.test(this.value)) {
                        headingTextPicker.value = this.value;
                        updateColorPreview();
                    }
                });
            }
            
            // Body text color sync
            const bodyTextPicker = document.getElementById('colors.bodyText');
            const bodyTextText = document.getElementById('colors.bodyText.text');
            if (bodyTextPicker && bodyTextText) {
                bodyTextPicker.addEventListener('input', updateColorPreview);
                bodyTextText.addEventListener('input', function() {
                    if (/^#[0-9A-Fa-f]{6}$/.test(this.value)) {
                        bodyTextPicker.value = this.value;
                        updateColorPreview();
                    }
                });
            }
            
            // Link color sync
            const linkColorPicker = document.getElementById('colors.linkColor');
            const linkColorText = document.getElementById('colors.linkColor.text');
            if (linkColorPicker && linkColorText) {
                linkColorPicker.addEventListener('input', updateColorPreview);
                linkColorText.addEventListener('input', function() {
                    if (/^#[0-9A-Fa-f]{6}$/.test(this.value)) {
                        linkColorPicker.value = this.value;
                        updateColorPreview();
                    }
                });
            }
            
            // Header/Footer link color sync
            const headerFooterLinkColorPicker = document.getElementById('colors.headerFooterLinkColor');
            const headerFooterLinkColorText = document.getElementById('colors.headerFooterLinkColor.text');
            if (headerFooterLinkColorPicker && headerFooterLinkColorText) {
                headerFooterLinkColorPicker.addEventListener('input', updateColorPreview);
                headerFooterLinkColorText.addEventListener('input', function() {
                    if (/^#[0-9A-Fa-f]{6}$/.test(this.value)) {
                        headerFooterLinkColorPicker.value = this.value;
                        updateColorPreview();
                    }
                });
            }
        });

        function previewLogoFile(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const preview = document.getElementById('logoPreview');
                    if (preview) {
                        preview.src = e.target.result;
                    }
                }
                
                reader.readAsDataURL(input.files[0]);
            }
        }

        // Initialize preview on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateLogoPreview();
        });
    </script>
</body>
</html>
